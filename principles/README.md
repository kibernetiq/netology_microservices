# Домашнее задание к занятию «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации,
- возможность проверки аутентификационной информации в запросах,
- обеспечение терминации HTTPS.

Обоснуйте свой выбор.

### Ответ:

Преимущества облачных API Gateway:  
Удобны в использовании и значительно экономят время разработки, легко настраиваются.
Позволяют выполнять контроль различных показателей, показывая в удобном интерфейсе, например, число ошибок или задержку вызова. 
- Google API Gateway
- Amazon API Gateway
- Azure API Management
- Yandex API Gateway
- SberCloud API Gateway

Преимущества локальных API Gateway:  
Развертывание локальных шлюзов в тех же средах, где реализованы API серверной части, позволяет передавать трафик API непосредственно в API серверной части, что дает возможность сократить задержку, оптимизировать затраты на передачу данных и обеспечить соответствие требованиям.  
- Nginx
- OpenIG
- Tyk
- AWS Lambda

Думаю оптимальным решением для реализации API Gateway будет использование Nginx, который будет отвечать за маршрутизацию и сопутствующие конфиги, а в связке с OpenIG можно будет тонко настроить контроль авторизации и аутентификации запросов. (Можно в приципе обойтись и чем то одним).

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности,
- хранение сообщений на диске в процессе доставки,
- высокая скорость работы,
- поддержка различных форматов сообщений,
- разделение прав доступа к различным потокам сообщений,
- простота эксплуатации.

Обоснуйте свой выбор.

### Ответ:

Задача \ Брокер | Kafka | Redis | RabbitMQ | ActiveMQ
--- | --- | --- | --- | ---
Поддержка кластеризации для обеспечения надежности | + | + | + | + |
Хранение сообщений на диске в процессе доставки | + | - | + | + |
Высокая скорость работы | + | + | + | - |
Поддержка различных форматов сообщений | + | + | + | - |
Разделение прав доступа к различным потокам сообщений | + | + | + | + |
Простота эксплуатации | + | + | + | + |

RabbitMQ и Kafka обе системы в целом подходят по требованиям, выбор брокера сообщений, зависит от требований проекта и конкретных задач.